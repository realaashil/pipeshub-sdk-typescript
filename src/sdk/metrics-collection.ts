/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { metricsCollectionGetConfiguration } from "../funcs/metrics-collection-get-configuration.js";
import { metricsCollectionSetPushInterval } from "../funcs/metrics-collection-set-push-interval.js";
import { metricsCollectionSetServerUrl } from "../funcs/metrics-collection-set-server-url.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as models from "../models/index.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class MetricsCollection extends ClientSDK {
  /**
   * Get metrics collection configuration
   *
   * @remarks
   * Retrieve the current metrics collection configuration including:
   * - Whether collection is enabled
   * - Push interval settings
   * - Server URL configuration
   * - Instance identification
   *
   * **Admin Access Required:** This endpoint requires administrator privileges.
   */
  async getConfiguration(
    options?: RequestOptions,
  ): Promise<models.MetricsCollectionConfig> {
    return unwrapAsync(metricsCollectionGetConfiguration(
      this,
      options,
    ));
  }

  /**
   * Configure metrics push interval
   *
   * @remarks
   * Set how frequently collected metrics are pushed to the remote server.
   *
   * **Interval Guidelines:**
   * - Minimum: 1000ms (1 second) - for real-time monitoring
   * - Recommended: 60000ms (1 minute) - balanced performance
   * - Maximum: No hard limit, but longer intervals may delay insights
   *
   * **Performance Considerations:**
   * - Shorter intervals provide more real-time data but increase network traffic
   * - Longer intervals reduce overhead but delay metric visibility
   * - Changes take effect on the next push cycle
   *
   * **Admin Access Required:** This endpoint requires administrator privileges.
   */
  async setPushInterval(
    request: operations.SetMetricsPushIntervalRequest,
    options?: RequestOptions,
  ): Promise<operations.SetMetricsPushIntervalResponse> {
    return unwrapAsync(metricsCollectionSetPushInterval(
      this,
      request,
      options,
    ));
  }

  /**
   * Configure metrics server URL
   *
   * @remarks
   * Set the remote server URL where metrics will be pushed.
   *
   * **Use Cases:**
   * - Self-hosted analytics: Point to your own Prometheus-compatible endpoint
   * - Custom monitoring: Integrate with your organization's monitoring stack
   * - Development: Use a local endpoint for testing
   *
   * **URL Requirements:**
   * - Must be a valid URL (http or https)
   * - Server must accept POST requests with JSON payload
   * - Server should return 2xx status for successful pushes
   *
   * **Admin Access Required:** This endpoint requires administrator privileges.
   */
  async setServerUrl(
    request: operations.SetMetricsServerUrlRequest,
    options?: RequestOptions,
  ): Promise<operations.SetMetricsServerUrlResponse> {
    return unwrapAsync(metricsCollectionSetServerUrl(
      this,
      request,
      options,
    ));
  }
}
