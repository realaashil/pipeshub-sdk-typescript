/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { documentBufferGet } from "../funcs/document-buffer-get.js";
import { documentBufferUpdate } from "../funcs/document-buffer-update.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class DocumentBuffer extends ClientSDK {
  /**
   * Get document buffer
   *
   * @remarks
   * Retrieve the raw binary content of a document as a buffer. Used for in-memory document processing.<br><br>
   * <b>Overview:</b><br>
   * Returns the complete file content as a binary buffer. This is useful for server-side document processing, content analysis, or format conversion.<br><br>
   * <b>Use Cases:</b><br>
   * <ul>
   * <li>Document parsing and text extraction</li>
   * <li>Format conversion pipelines</li>
   * <li>Content analysis and indexing</li>
   * <li>Thumbnail generation</li>
   * </ul>
   * <b>Version Support:</b><br>
   * Specify <code>version</code> to get a specific historical version's content.<br><br>
   * <b>Memory Considerations:</b><br>
   * Large files will consume significant memory. For files &gt;100MB, consider using streaming download instead.<br><br>
   * <b>Response Format:</b><br>
   * Returns Node.js Buffer object serialized as JSON with type and data array.
   */
  async get(
    request: operations.GetDocumentBufferRequest,
    options?: RequestOptions,
  ): Promise<ReadableStream<Uint8Array>> {
    return unwrapAsync(documentBufferGet(
      this,
      request,
      options,
    ));
  }

  /**
   * Update document buffer
   *
   * @remarks
   * Replace the document's file content with a new file. Updates the current version without creating version history.<br><br>
   * <b>Overview:</b><br>
   * This endpoint replaces the document's content in storage. Use this for quick updates that don't need version tracking.<br><br>
   * <b>When to Use:</b><br>
   * <ul>
   * <li>Updating draft documents</li>
   * <li>Replacing temporary files</li>
   * <li>Quick fixes without version history</li>
   * </ul>
   * <b>For Version Tracking:</b><br>
   * Use <code>/uploadNextVersion</code> instead if you need to maintain version history.<br><br>
   * <b>File Constraints:</b><br>
   * <ul>
   * <li>Maximum size: 100MB</li>
   * <li>File extension must match original document</li>
   * </ul>
   * <b>Side Effects:</b><br>
   * <ul>
   * <li>Increments <code>mutationCount</code></li>
   * <li>Updates <code>sizeInBytes</code></li>
   * <li>Updates <code>updatedAt</code> timestamp</li>
   * </ul>
   */
  async update(
    request: operations.UpdateDocumentBufferRequest,
    options?: RequestOptions,
  ): Promise<operations.UpdateDocumentBufferResponse> {
    return unwrapAsync(documentBufferUpdate(
      this,
      request,
      options,
    ));
  }
}
