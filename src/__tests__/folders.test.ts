/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { Pipeshub } from "../index.js";
import { createTestHTTPClient } from "./test-client.js";

test("Folders Create Root Folder", async () => {
  const testHttpClient = createTestHTTPClient("createRootFolder");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.folders.createRootFolder({
    kbId: "<id>",
    body: {
      folderName: "Project Documents",
    },
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    name: "<value>",
    kbId: "<id>",
    orgId: "<id>",
    isDeleted: false,
  });
});

test("Folders Get Folder Contents", async () => {
  const testHttpClient = createTestHTTPClient("getFolderContents");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.folders.getFolderContents({
    kbId: "<id>",
    folderId: "<id>",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    records: [
      {
        id: "550e8400-e29b-41d4-a716-446655440000",
        recordName: "Q4 Financial Report.pdf",
        externalRecordId: "507f1f77bcf86cd799439011",
        recordType: "FILE",
        origin: "UPLOAD",
        connectorId: "conn_123456",
        connectorName: "GOOGLE_DRIVE",
        orgId: "org_abc123",
        kbId: "kb_xyz789",
        folderId: "folder_456",
        version: 3,
        createdAtTimestamp: 1704153600000,
        updatedAtTimestamp: 1704240000000,
        indexingStatus: "COMPLETED",
        isDeleted: false,
        isArchived: false,
        webUrl: "https://drive.google.com/file/d/abc123",
        mimeType: "application/pdf",
        sizeInBytes: 1048576,
        extension: "pdf",
        type: "record",
        ticketRecord: {},
      },
    ],
  });
});

test("Folders Update Folder", async () => {
  const testHttpClient = createTestHTTPClient("updateFolder");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.folders.updateFolder({
    kbId: "<id>",
    folderId: "<id>",
    body: {
      folderName: "<value>",
    },
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    name: "<value>",
    kbId: "<id>",
    orgId: "<id>",
    isDeleted: false,
  });
});

test("Folders Get Folder Children", async () => {
  const testHttpClient = createTestHTTPClient("getFolderChildren");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.folders.getFolderChildren({
    kbId: "<id>",
    folderId: "<id>",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    records: [
      {
        id: "550e8400-e29b-41d4-a716-446655440000",
        recordName: "Q4 Financial Report.pdf",
        externalRecordId: "507f1f77bcf86cd799439011",
        recordType: "FILE",
        origin: "UPLOAD",
        connectorId: "conn_123456",
        connectorName: "GOOGLE_DRIVE",
        orgId: "org_abc123",
        kbId: "kb_xyz789",
        folderId: "folder_456",
        version: 3,
        createdAtTimestamp: 1704153600000,
        updatedAtTimestamp: 1704240000000,
        indexingStatus: "COMPLETED",
        isDeleted: false,
        isArchived: false,
        webUrl: "https://drive.google.com/file/d/abc123",
        mimeType: "application/pdf",
        sizeInBytes: 1048576,
        extension: "pdf",
        type: "record",
        ticketRecord: {},
      },
    ],
  });
});

test("Folders Create Subfolder", async () => {
  const testHttpClient = createTestHTTPClient("createSubfolder");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.folders.createSubfolder({
    kbId: "<id>",
    folderId: "<id>",
    body: {
      folderName: "<value>",
    },
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    name: "<value>",
    kbId: "<id>",
    orgId: "<id>",
    isDeleted: false,
  });
});
