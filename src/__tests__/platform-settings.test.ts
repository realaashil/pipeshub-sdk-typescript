/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { Pipeshub } from "../index.js";
import { createTestHTTPClient } from "./test-client.js";

test("Platform Settings Get Platform Settings", async () => {
  const testHttpClient = createTestHTTPClient("getPlatformSettings");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.platformSettings.getPlatformSettings();
  expect(result).toBeDefined();
  expect(result).toEqual({
    fileUploadMaxSizeBytes: 31457280,
    featureFlags: {
      "ENABLE_BETA_CONNECTORS": false,
    },
    updatedAt: new Date("2024-01-15T10:30:00Z"),
  });
});

test("Platform Settings Get Available Feature Flags", async () => {
  const testHttpClient = createTestHTTPClient("getAvailableFeatureFlags");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.platformSettings.getAvailableFeatureFlags();
  expect(result).toBeDefined();
  expect(result).toEqual({
    flags: [
      {
        key: "ENABLE_BETA_CONNECTORS",
        label: "Enable Beta Connectors",
      },
    ],
  });
});

test("Platform Settings Get Custom System Prompt", async () => {
  const testHttpClient = createTestHTTPClient("getCustomSystemPrompt");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.platformSettings.getCustomSystemPrompt();
  expect(result).toBeDefined();
  expect(result).toEqual({});
});
