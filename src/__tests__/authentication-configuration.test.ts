/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { Pipeshub } from "../index.js";
import { createTestHTTPClient } from "./test-client.js";

test("Authentication Configuration Get Azure Ad Auth Config", async () => {
  const testHttpClient = createTestHTTPClient("getAzureAdAuthConfig");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.authenticationConfiguration
    .getAzureAdAuthConfig();
  expect(result).toBeDefined();
  expect(result).toEqual({
    clientId: "12345678-1234-1234-1234-123456789abc",
    tenantId: "common",
  });
});

test("Authentication Configuration Get Microsoft Auth Config", async () => {
  const testHttpClient = createTestHTTPClient("getMicrosoftAuthConfig");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.authenticationConfiguration
    .getMicrosoftAuthConfig();
  expect(result).toBeDefined();
  expect(result).toEqual({
    clientId: "12345678-1234-1234-1234-123456789abc",
    tenantId: "common",
  });
});

test("Authentication Configuration Get Google Auth Config", async () => {
  const testHttpClient = createTestHTTPClient("getGoogleAuthConfig");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.authenticationConfiguration
    .getGoogleAuthConfig();
  expect(result).toBeDefined();
  expect(result).toEqual({
    clientId: "123456789-abc.apps.googleusercontent.com",
  });
});

test("Authentication Configuration Get Sso Auth Config", async () => {
  const testHttpClient = createTestHTTPClient("getSsoAuthConfig");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.authenticationConfiguration.getSsoAuthConfig();
  expect(result).toBeDefined();
  expect(result).toEqual({
    entryPoint: "https://idp.example.com/sso/saml",
    emailKey: "email",
  });
});

test("Authentication Configuration Get Generic O Auth Config", async () => {
  const testHttpClient = createTestHTTPClient("getGenericOAuthConfig");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.authenticationConfiguration
    .getGenericOAuthConfig();
  expect(result).toBeDefined();
  expect(result).toEqual({
    providerName: "Custom OAuth Provider",
    scope: "openid profile email",
  });
});
