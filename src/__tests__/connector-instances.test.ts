/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { Pipeshub } from "../index.js";
import { createTestHTTPClient } from "./test-client.js";

test("Connector Instances List Connector Instances", async () => {
  const testHttpClient = createTestHTTPClient("listConnectorInstances");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.listConnectorInstances({
    scope: "team",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    connectors: [
      {
        connectorId: "conn_abc123",
        connectorType: "google-drive",
        instanceName: "Company Google Drive",
        scope: "team",
      },
    ],
  });
});

test("Connector Instances Create Connector Instance Google Drive", async () => {
  const testHttpClient = createTestHTTPClient(
    "createConnectorInstance-googleDrive",
  );

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.createConnectorInstance({
    connectorType: "google-drive",
    instanceName: "Company Google Drive",
    scope: "team",
    authType: "OAUTH_ADMIN_CONSENT",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    connector: {
      connectorId: "conn_abc123",
      connectorType: "google-drive",
      instanceName: "Company Google Drive",
      scope: "team",
    },
  });
});

test("Connector Instances Create Connector Instance Confluence", async () => {
  const testHttpClient = createTestHTTPClient(
    "createConnectorInstance-confluence",
  );

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.createConnectorInstance({
    connectorType: "confluence",
    instanceName: "My Confluence",
    scope: "personal",
    authType: "API_TOKEN",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    connector: {
      connectorId: "conn_abc123",
      connectorType: "google-drive",
      instanceName: "Company Google Drive",
      scope: "team",
    },
  });
});

test("Connector Instances Create Connector Instance", async () => {
  const testHttpClient = createTestHTTPClient("createConnectorInstance");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.createConnectorInstance({
    connectorType: "google-drive",
    instanceName: "Marketing Team Drive",
    scope: "team",
    authType: "OAUTH",
    config: {
      auth: {
        values: {
          "apiKey": "sk-xxxxx",
          "baseUrl": "https://api.example.com",
        },
        oauthConfigId: "oauth_config_123",
      },
      sync: {
        scheduledConfig: {
          cronExpression: "0 */6 * * *",
          timezone: "America/New_York",
        },
        webhookConfig: {
          events: [
            "file.created",
            "file.modified",
            "file.deleted",
          ],
        },
      },
      filters: {
        sync: {
          values: {
            "fileTypes": [
              "pdf",
              "docx",
              "xlsx",
            ],
            "folders": [
              "folder_id_1",
              "folder_id_2",
            ],
            "includeShared": true,
          },
        },
      },
    },
    baseUrl: "https://confluence.mycompany.com",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    connector: {
      connectorId: "conn_abc123",
      connectorType: "google-drive",
      instanceName: "Company Google Drive",
      scope: "team",
    },
  });
});

test("Connector Instances List Active Connectors", async () => {
  const testHttpClient = createTestHTTPClient("listActiveConnectors");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.listActiveConnectors();
  expect(result).toBeDefined();
  expect(result).toEqual({
    connectors: [
      {
        connectorId: "conn_abc123",
        connectorType: "google-drive",
        instanceName: "Company Google Drive",
        scope: "team",
      },
    ],
  });
});

test("Connector Instances List Inactive Connectors", async () => {
  const testHttpClient = createTestHTTPClient("listInactiveConnectors");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.listInactiveConnectors();
  expect(result).toBeDefined();
  expect(result).toEqual({
    connectors: [
      {
        connectorId: "conn_abc123",
        connectorType: "google-drive",
        instanceName: "Company Google Drive",
        scope: "team",
      },
    ],
  });
});

test("Connector Instances List Configured Connectors", async () => {
  const testHttpClient = createTestHTTPClient("listConfiguredConnectors");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.listConfiguredConnectors({
    scope: "team",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    connectors: [
      {
        connectorId: "conn_abc123",
        connectorType: "google-drive",
        instanceName: "Company Google Drive",
        scope: "team",
      },
    ],
  });
});

test("Connector Instances List Active Agent Connectors", async () => {
  const testHttpClient = createTestHTTPClient("listActiveAgentConnectors");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.listActiveAgentConnectors({
    scope: "team",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    connectors: [
      {
        connectorId: "conn_abc123",
        connectorType: "google-drive",
        instanceName: "Company Google Drive",
        scope: "team",
      },
    ],
  });
});

test("Connector Instances Get Connector Instance", async () => {
  const testHttpClient = createTestHTTPClient("getConnectorInstance");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.getConnectorInstance({
    connectorId: "conn_abc123",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    connector: {
      connectorId: "conn_abc123",
      connectorType: "google-drive",
      instanceName: "Company Google Drive",
      scope: "team",
    },
  });
});

test("Connector Instances Delete Connector Instance", async () => {
  const testHttpClient = createTestHTTPClient("deleteConnectorInstance");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.deleteConnectorInstance({
    connectorId: "<id>",
  });
  expect(result).toBeDefined();
  expect(result).toEqual({});
});

test("Connector Instances Update Connector Name", async () => {
  const testHttpClient = createTestHTTPClient("updateConnectorName");

  const pipeshub = new Pipeshub({
    serverURL: process.env["TEST_SERVER_URL"] ?? "http://localhost:18080",
    httpClient: testHttpClient,
    security: {
      bearerAuth: "<YOUR_BEARER_TOKEN_HERE>",
    },
  });

  const result = await pipeshub.connectorInstances.updateConnectorName({
    connectorId: "<id>",
    body: {
      instanceName: "Sales Team Drive (Updated)",
    },
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    connector: {
      connectorId: "conn_abc123",
      connectorType: "google-drive",
      instanceName: "Company Google Drive",
      scope: "team",
    },
  });
});
