/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { safeParse } from "../lib/schemas.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import { SDKValidationError } from "./errors/sdk-validation-error.js";

/**
 * S3 storage URL for this version
 */
export type DocumentVersionS3 = {
  url?: string | undefined;
};

/**
 * Azure Blob storage URL for this version
 */
export type DocumentVersionAzureBlob = {
  url?: string | undefined;
};

/**
 * Local storage path for this version
 */
export type DocumentVersionLocal = {
  url?: string | undefined;
  localPath?: string | undefined;
};

/**
 * Represents a single version entry in a document's version history
 */
export type DocumentVersion = {
  /**
   * Version number (0-indexed, auto-incremented)
   */
  version?: number | undefined;
  /**
   * User-assigned version label (e.g., "v1.0", "Final")
   */
  userAssignedVersionLabel?: string | undefined;
  /**
   * Note describing this version's changes
   */
  note?: string | undefined;
  /**
   * File extension for this version
   */
  extension?: string | undefined;
  /**
   * File size in bytes for this version
   */
  size?: number | undefined;
  /**
   * Mutation count at time of version creation
   */
  mutationCount?: number | undefined;
  /**
   * S3 storage URL for this version
   */
  s3?: DocumentVersionS3 | undefined;
  /**
   * Azure Blob storage URL for this version
   */
  azureBlob?: DocumentVersionAzureBlob | undefined;
  /**
   * Local storage path for this version
   */
  local?: DocumentVersionLocal | undefined;
  /**
   * Version creation timestamp in milliseconds
   */
  createdAt?: number | undefined;
  /**
   * User ID who created this version
   */
  initiatedByUserId?: string | undefined;
};

/** @internal */
export const DocumentVersionS3$inboundSchema: z.ZodMiniType<
  DocumentVersionS3,
  unknown
> = z.object({
  url: types.optional(types.string()),
});

export function documentVersionS3FromJSON(
  jsonString: string,
): SafeParseResult<DocumentVersionS3, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => DocumentVersionS3$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'DocumentVersionS3' from JSON`,
  );
}

/** @internal */
export const DocumentVersionAzureBlob$inboundSchema: z.ZodMiniType<
  DocumentVersionAzureBlob,
  unknown
> = z.object({
  url: types.optional(types.string()),
});

export function documentVersionAzureBlobFromJSON(
  jsonString: string,
): SafeParseResult<DocumentVersionAzureBlob, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => DocumentVersionAzureBlob$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'DocumentVersionAzureBlob' from JSON`,
  );
}

/** @internal */
export const DocumentVersionLocal$inboundSchema: z.ZodMiniType<
  DocumentVersionLocal,
  unknown
> = z.object({
  url: types.optional(types.string()),
  localPath: types.optional(types.string()),
});

export function documentVersionLocalFromJSON(
  jsonString: string,
): SafeParseResult<DocumentVersionLocal, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => DocumentVersionLocal$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'DocumentVersionLocal' from JSON`,
  );
}

/** @internal */
export const DocumentVersion$inboundSchema: z.ZodMiniType<
  DocumentVersion,
  unknown
> = z.object({
  version: types.optional(types.number()),
  userAssignedVersionLabel: types.optional(types.string()),
  note: types.optional(types.string()),
  extension: types.optional(types.string()),
  size: types.optional(types.number()),
  mutationCount: types.optional(types.number()),
  s3: types.optional(z.lazy(() => DocumentVersionS3$inboundSchema)),
  azureBlob: types.optional(
    z.lazy(() => DocumentVersionAzureBlob$inboundSchema),
  ),
  local: types.optional(z.lazy(() => DocumentVersionLocal$inboundSchema)),
  createdAt: types.optional(types.number()),
  initiatedByUserId: types.optional(types.string()),
});

export function documentVersionFromJSON(
  jsonString: string,
): SafeParseResult<DocumentVersion, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => DocumentVersion$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'DocumentVersion' from JSON`,
  );
}
