/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { remap as remap$ } from "../lib/primitives.js";
import { safeParse } from "../lib/schemas.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import { SDKValidationError } from "./errors/sdk-validation-error.js";

/**
 * OpenID Connect Discovery Response (RFC 8414).
 *
 * @remarks
 * Contains authorization server metadata.
 */
export type OpenIDConfiguration = {
  /**
   * Authorization server issuer URL
   */
  issuer?: string | undefined;
  /**
   * OAuth authorization endpoint
   */
  authorizationEndpoint?: string | undefined;
  /**
   * OAuth token endpoint
   */
  tokenEndpoint?: string | undefined;
  /**
   * OpenID Connect UserInfo endpoint
   */
  userinfoEndpoint?: string | undefined;
  /**
   * Token revocation endpoint
   */
  revocationEndpoint?: string | undefined;
  /**
   * Token introspection endpoint
   */
  introspectionEndpoint?: string | undefined;
  /**
   * JSON Web Key Set endpoint
   */
  jwksUri?: string | undefined;
  /**
   * Supported OAuth scopes
   */
  scopesSupported?: Array<string> | undefined;
  /**
   * Supported OAuth response types
   */
  responseTypesSupported?: Array<string> | undefined;
  /**
   * Supported grant types
   */
  grantTypesSupported?: Array<string> | undefined;
  /**
   * Supported client authentication methods
   */
  tokenEndpointAuthMethodsSupported?: Array<string> | undefined;
  /**
   * Supported subject identifier types
   */
  subjectTypesSupported?: Array<string> | undefined;
  /**
   * Supported ID token signing algorithms
   */
  idTokenSigningAlgValuesSupported?: Array<string> | undefined;
  /**
   * Supported claims in ID tokens/UserInfo
   */
  claimsSupported?: Array<string> | undefined;
  /**
   * Supported PKCE code challenge methods
   */
  codeChallengeMethodsSupported?: Array<string> | undefined;
};

/** @internal */
export const OpenIDConfiguration$inboundSchema: z.ZodMiniType<
  OpenIDConfiguration,
  unknown
> = z.pipe(
  z.object({
    issuer: types.optional(types.string()),
    authorization_endpoint: types.optional(types.string()),
    token_endpoint: types.optional(types.string()),
    userinfo_endpoint: types.optional(types.string()),
    revocation_endpoint: types.optional(types.string()),
    introspection_endpoint: types.optional(types.string()),
    jwks_uri: types.optional(types.string()),
    scopes_supported: types.optional(z.array(types.string())),
    response_types_supported: types.optional(z.array(types.string())),
    grant_types_supported: types.optional(z.array(types.string())),
    token_endpoint_auth_methods_supported: types.optional(
      z.array(types.string()),
    ),
    subject_types_supported: types.optional(z.array(types.string())),
    id_token_signing_alg_values_supported: types.optional(
      z.array(types.string()),
    ),
    claims_supported: types.optional(z.array(types.string())),
    code_challenge_methods_supported: types.optional(z.array(types.string())),
  }),
  z.transform((v) => {
    return remap$(v, {
      "authorization_endpoint": "authorizationEndpoint",
      "token_endpoint": "tokenEndpoint",
      "userinfo_endpoint": "userinfoEndpoint",
      "revocation_endpoint": "revocationEndpoint",
      "introspection_endpoint": "introspectionEndpoint",
      "jwks_uri": "jwksUri",
      "scopes_supported": "scopesSupported",
      "response_types_supported": "responseTypesSupported",
      "grant_types_supported": "grantTypesSupported",
      "token_endpoint_auth_methods_supported":
        "tokenEndpointAuthMethodsSupported",
      "subject_types_supported": "subjectTypesSupported",
      "id_token_signing_alg_values_supported":
        "idTokenSigningAlgValuesSupported",
      "claims_supported": "claimsSupported",
      "code_challenge_methods_supported": "codeChallengeMethodsSupported",
    });
  }),
);

export function openIDConfigurationFromJSON(
  jsonString: string,
): SafeParseResult<OpenIDConfiguration, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => OpenIDConfiguration$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'OpenIDConfiguration' from JSON`,
  );
}
