/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { safeParse } from "../lib/schemas.js";
import * as openEnums from "../types/enums.js";
import { OpenEnum } from "../types/enums.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import { SDKValidationError } from "./errors/sdk-validation-error.js";

export const Event = {
  Connected: "connected",
  Chunk: "chunk",
  Citation: "citation",
  Complete: "complete",
  Error: "error",
} as const;
export type Event = OpenEnum<typeof Event>;

/**
 * Server-Sent Event structure for streaming responses.<br><br>
 *
 * @remarks
 * <b>Event Types:</b>
 * <ul>
 * <li><code>connected</code> - Initial connection established</li>
 * <li><code>chunk</code> - Partial response content</li>
 * <li><code>citation</code> - Citation reference</li>
 * <li><code>complete</code> - Final response with all data</li>
 * <li><code>error</code> - Error occurred during streaming</li>
 * </ul>
 */
export type SSEEvent = {
  event?: Event | undefined;
  /**
   * JSON-encoded event payload
   */
  data?: string | undefined;
};

/** @internal */
export const Event$inboundSchema: z.ZodMiniType<Event, unknown> = openEnums
  .inboundSchema(Event);

/** @internal */
export const SSEEvent$inboundSchema: z.ZodMiniType<SSEEvent, unknown> = z
  .object({
    event: types.optional(Event$inboundSchema),
    data: types.optional(types.string()),
  });

export function sseEventFromJSON(
  jsonString: string,
): SafeParseResult<SSEEvent, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => SSEEvent$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'SSEEvent' from JSON`,
  );
}
