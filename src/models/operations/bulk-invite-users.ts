/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { safeParse } from "../../lib/schemas.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import * as types from "../../types/primitives.js";
import { SDKValidationError } from "../errors/sdk-validation-error.js";

/**
 * Request payload
 */
export type BulkInviteUsersRequest = {
  /**
   * Array of email addresses to invite (max 100)
   */
  emails: Array<string>;
  /**
   * Optional group IDs to add all invited users to
   */
  groupIds?: Array<string> | undefined;
  /**
   * Whether to send invitation emails immediately
   */
  sendEmail?: boolean | undefined;
};

export type Failure = {
  email?: string | undefined;
  reason?: string | undefined;
};

/**
 * Bulk invitation processed
 */
export type BulkInviteUsersResponse = {
  success?: boolean | undefined;
  message?: string | undefined;
  /**
   * Number of successful invitations sent
   */
  invited?: number | undefined;
  /**
   * Number of existing users skipped
   */
  skipped?: number | undefined;
  /**
   * Number of failed invitations
   */
  failed?: number | undefined;
  /**
   * Details of failed invitations
   */
  failures?: Array<Failure> | undefined;
};

/** @internal */
export type BulkInviteUsersRequest$Outbound = {
  emails: Array<string>;
  groupIds?: Array<string> | undefined;
  sendEmail: boolean;
};

/** @internal */
export const BulkInviteUsersRequest$outboundSchema: z.ZodMiniType<
  BulkInviteUsersRequest$Outbound,
  BulkInviteUsersRequest
> = z.object({
  emails: z.array(z.string()),
  groupIds: z.optional(z.array(z.string())),
  sendEmail: z._default(z.boolean(), true),
});

export function bulkInviteUsersRequestToJSON(
  bulkInviteUsersRequest: BulkInviteUsersRequest,
): string {
  return JSON.stringify(
    BulkInviteUsersRequest$outboundSchema.parse(bulkInviteUsersRequest),
  );
}

/** @internal */
export const Failure$inboundSchema: z.ZodMiniType<Failure, unknown> = z.object({
  email: types.optional(types.string()),
  reason: types.optional(types.string()),
});

export function failureFromJSON(
  jsonString: string,
): SafeParseResult<Failure, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Failure$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Failure' from JSON`,
  );
}

/** @internal */
export const BulkInviteUsersResponse$inboundSchema: z.ZodMiniType<
  BulkInviteUsersResponse,
  unknown
> = z.object({
  success: types.optional(types.boolean()),
  message: types.optional(types.string()),
  invited: types.optional(types.number()),
  skipped: types.optional(types.number()),
  failed: types.optional(types.number()),
  failures: types.optional(z.array(z.lazy(() => Failure$inboundSchema))),
});

export function bulkInviteUsersResponseFromJSON(
  jsonString: string,
): SafeParseResult<BulkInviteUsersResponse, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => BulkInviteUsersResponse$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'BulkInviteUsersResponse' from JSON`,
  );
}
