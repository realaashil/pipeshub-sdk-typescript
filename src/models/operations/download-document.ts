/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { safeParse } from "../../lib/schemas.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import * as types from "../../types/primitives.js";
import { smartUnion } from "../../types/smart-union.js";
import { SDKValidationError } from "../errors/sdk-validation-error.js";

export type DownloadDocumentRequest = {
  /**
   * Document ID (24-character MongoDB ObjectId)
   */
  documentId: string;
  /**
   * Version number to download (0-indexed). Must be less than total versions.
   */
  version?: number | undefined;
  /**
   * Signed URL validity duration in seconds
   */
  expirationTimeInSeconds?: number | undefined;
};

/**
 * Download URL generated or file stream
 */
export type DownloadDocumentResponseBody = {
  success?: boolean | undefined;
  /**
   * Presigned URL for download (S3/Azure only)
   */
  signedUrl?: string | undefined;
};

export type DownloadDocumentResponse =
  | DownloadDocumentResponseBody
  | ReadableStream<Uint8Array>;

/** @internal */
export type DownloadDocumentRequest$Outbound = {
  documentId: string;
  version?: number | undefined;
  expirationTimeInSeconds: number;
};

/** @internal */
export const DownloadDocumentRequest$outboundSchema: z.ZodMiniType<
  DownloadDocumentRequest$Outbound,
  DownloadDocumentRequest
> = z.object({
  documentId: z.string(),
  version: z.optional(z.int()),
  expirationTimeInSeconds: z._default(z.int(), 3600),
});

export function downloadDocumentRequestToJSON(
  downloadDocumentRequest: DownloadDocumentRequest,
): string {
  return JSON.stringify(
    DownloadDocumentRequest$outboundSchema.parse(downloadDocumentRequest),
  );
}

/** @internal */
export const DownloadDocumentResponseBody$inboundSchema: z.ZodMiniType<
  DownloadDocumentResponseBody,
  unknown
> = z.object({
  success: types.optional(types.boolean()),
  signedUrl: types.optional(types.string()),
});

export function downloadDocumentResponseBodyFromJSON(
  jsonString: string,
): SafeParseResult<DownloadDocumentResponseBody, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => DownloadDocumentResponseBody$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'DownloadDocumentResponseBody' from JSON`,
  );
}

/** @internal */
export const DownloadDocumentResponse$inboundSchema: z.ZodMiniType<
  DownloadDocumentResponse,
  unknown
> = smartUnion([
  z.lazy(() => DownloadDocumentResponseBody$inboundSchema),
  z.custom<ReadableStream<Uint8Array>>(x => x instanceof ReadableStream),
]);

export function downloadDocumentResponseFromJSON(
  jsonString: string,
): SafeParseResult<DownloadDocumentResponse, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => DownloadDocumentResponse$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'DownloadDocumentResponse' from JSON`,
  );
}
