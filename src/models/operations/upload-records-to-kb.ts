/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { remap as remap$ } from "../../lib/primitives.js";

export type UploadRecordsToKBFile = {
  fileName: string;
  content: ReadableStream<Uint8Array> | Blob | ArrayBuffer | Uint8Array;
};

/**
 * Request payload
 */
export type UploadRecordsToKBRequestBody = {
  /**
   * Files to upload (max 1000)
   */
  files: Array<UploadRecordsToKBFile>;
  /**
   * JSON array with file_path and last_modified for each file
   */
  filesMetadata?: string | undefined;
  /**
   * Enable version tracking
   */
  isVersioned?: boolean | undefined;
  /**
   * Type of records to create
   */
  recordType?: string | undefined;
};

export type UploadRecordsToKBRequest = {
  /**
   * Knowledge base ID
   */
  kbId: string;
  /**
   * Request payload
   */
  body: UploadRecordsToKBRequestBody;
};

/** @internal */
export type UploadRecordsToKBFile$Outbound = {
  fileName: string;
  content: ReadableStream<Uint8Array> | Blob | ArrayBuffer | Uint8Array;
};

/** @internal */
export const UploadRecordsToKBFile$outboundSchema: z.ZodMiniType<
  UploadRecordsToKBFile$Outbound,
  UploadRecordsToKBFile
> = z.object({
  fileName: z.string(),
  content: z.union([
    z.custom<ReadableStream<Uint8Array>>(x => x instanceof ReadableStream),
    z.custom<Blob>(x => x instanceof Blob),
    z.custom<ArrayBuffer>(x => x instanceof ArrayBuffer),
    z.custom<Uint8Array>(x => x instanceof Uint8Array),
  ]),
});

export function uploadRecordsToKBFileToJSON(
  uploadRecordsToKBFile: UploadRecordsToKBFile,
): string {
  return JSON.stringify(
    UploadRecordsToKBFile$outboundSchema.parse(uploadRecordsToKBFile),
  );
}

/** @internal */
export type UploadRecordsToKBRequestBody$Outbound = {
  files: Array<UploadRecordsToKBFile$Outbound>;
  files_metadata?: string | undefined;
  isVersioned: boolean;
  recordType: string;
};

/** @internal */
export const UploadRecordsToKBRequestBody$outboundSchema: z.ZodMiniType<
  UploadRecordsToKBRequestBody$Outbound,
  UploadRecordsToKBRequestBody
> = z.pipe(
  z.object({
    files: z.array(z.lazy(() => UploadRecordsToKBFile$outboundSchema)),
    filesMetadata: z.optional(z.string()),
    isVersioned: z._default(z.boolean(), true),
    recordType: z._default(z.string(), "FILE"),
  }),
  z.transform((v) => {
    return remap$(v, {
      filesMetadata: "files_metadata",
    });
  }),
);

export function uploadRecordsToKBRequestBodyToJSON(
  uploadRecordsToKBRequestBody: UploadRecordsToKBRequestBody,
): string {
  return JSON.stringify(
    UploadRecordsToKBRequestBody$outboundSchema.parse(
      uploadRecordsToKBRequestBody,
    ),
  );
}

/** @internal */
export type UploadRecordsToKBRequest$Outbound = {
  kbId: string;
  body: UploadRecordsToKBRequestBody$Outbound;
};

/** @internal */
export const UploadRecordsToKBRequest$outboundSchema: z.ZodMiniType<
  UploadRecordsToKBRequest$Outbound,
  UploadRecordsToKBRequest
> = z.object({
  kbId: z.string(),
  body: z.lazy(() => UploadRecordsToKBRequestBody$outboundSchema),
});

export function uploadRecordsToKBRequestToJSON(
  uploadRecordsToKBRequest: UploadRecordsToKBRequest,
): string {
  return JSON.stringify(
    UploadRecordsToKBRequest$outboundSchema.parse(uploadRecordsToKBRequest),
  );
}
